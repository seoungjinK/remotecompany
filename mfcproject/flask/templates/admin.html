{% extends "base.html" %}

{% block title %}관리자 대시보드{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
    <header class="main-header">
        <div class="header-left">
            <h1 class="company-logo">(주)더문 관리자 시스템</h1>
        </div>
        <div class="header-right">
            <button id="run-mfc-btn" class="messenger-btn">메신저 실행</button>
            <a href="{{ url_for('logout') }}" class="logout-link">로그아웃</a>
        </div>
    </header>

    <div class="dashboard-container">
        <aside class="sidebar">
            <h3 class="sidebar-title">직원 상태</h3>
            <ul id="user-list" class="user-activity-list">
                {% for user in all_users %}
                <li class="user-item" data-username="{{ user.username }}">
                    <span class="status-dot status-{{ user.status or 'offline' }}"></span>
                    <span class="username">{{ user.full_name }} ({{ user.username }})</span>
                </li>
                {% endfor %}
            </ul>
        </aside>
        
        <main class="main-panel">
            <div class="video-display-area">
                <div class="welcome-header">
                    <h2>{{ display_name }}님, 환영합니다.</h2>
                    <p id="watching-title">직원을 선택하여 실시간 원본 영상을 확인하세요.</p>
                </div>
                <div class="video-container">
                    <img id="processed_video" src="" alt="선택된 직원의 영상이 여기에 표시됩니다.">
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}